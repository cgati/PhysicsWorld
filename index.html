<!DOCTYPE html>
<html>
<head>

<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />

<script type="text/javascript" src="js/lib/paper.js"></script>
<script type="text/javascript" src="js/PhysicsObject.js"></script>
<script type="text/javascript" src="js/WorldManager.js"></script>
<script type="text/javascript" src="js/dollar.js"></script>
<script type="text/javascript" src="js/dollarfront.js"></script>
<script type="text/javascript" src="js/dollarmine.js"></script>

<script type="text/javascript">
getting_path = false;
window.onload = function()
{
    paper.setup('myCanvas');

    var path;
    var tool = new paper.Tool();
    tool.onMouseDown = function(event)
    {
        if (!getting_path)
        {
            worldmanager.addBall(event.point, Math.random()*10);
            console.log("Mouse Clicked");
        }
        else
        {
            path = new paper.Path();
            path.strokeColor = 'blue';
            path.strokeWidth = 20;
            path.add(event.point);
            path.strokeWidth = 5;
        }
    }

    tool.onMouseDrag = function(event)
    {
        if(!getting_path)
            return;
        path.add(event.point);
    }

    tool.onMouseUp = function(event)
    {
        if(!getting_path)
            return;
        var seg_points = new Array();

        for(var i = 0; i < path.segments.length; i++){
        	//seg_points[i] = new Point(path.segments[i].point.x, path.segments[i].point.y);
        	//alert(seg_points[i]);
        	seg_points[i] = path.segments[i].point;
        }

        var recog = new DollarRecognizer();

        var result = recog.Recognize(seg_points, true);
        alert("Result: " + result.Name + " (" + round(result.Score,2) + ").");
        alert(path.segments.length);

        console.log("need to identify type here");
        path.remove();
        getting_path = false;
    }
}
</script>
</head>
<body>
    <h1>Experimental Stuff</h1>
    <button id="drawObject" onClick="getting_path=true;">Draw Object</button>
    <canvas style="background:#DDDDDD;" id="myCanvas" resize></canvas>
</body>
</html>
